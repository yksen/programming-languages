<div id="table_of_contents"></div>

<h1>Rozdział 1</h1>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.
<h2>Podrozdział 1.1</h2>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.
<h3>Podrozdział 1.1.1</h3>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.

<h1>Rozdział 2</h1>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.
<h2>Podrozdział 2.1</h2>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.
<h2 id="sample_id">Podrozdział 2.2</h2>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.
<h3>Podrozdział 2.2.1</h3>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.
<h3>Podrozdział 2.2.2</h3>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.

<h1>Rozdział 3</h1>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.

<h1>Rozdział 4</h1>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce ornare convallis metus, porttitor semper sem faucibus non. Nulla eu dolor elementum, eleifend enim at, volutpat lectus. Quisque neque sapien, semper ac tincidunt eget, euismod quis nisi. Cras placerat ante id eleifend sodales. Proin molestie ultricies arcu, eu finibus nibh pulvinar ut. Curabitur ligula justo, facilisis eget auctor ac, mollis in ipsum. Proin massa libero, lobortis et ante nec, tincidunt scelerisque lorem. Etiam venenatis augue id magna finibus consequat. In ex nisi, tristique elementum diam at, aliquam molestie nibh. Proin efficitur nisl non justo rhoncus tempus. Curabitur aliquet augue magna, ut posuere augue luctus ut. Cras quis ipsum vel mauris convallis pharetra ac et justo.

<script>
    createTableOfContents();

    function createTableOfContents() {
        let table_of_contents = document.querySelector("#table_of_contents");
        let headers = document.querySelectorAll("h1, h2, h3");
        table_of_contents.appendChild(document.createElement("ol"));

        let current_level = 0;
        let current_list = table_of_contents.querySelector("ol");

        for (let i = 0; i < headers.length; i++) {
            let header = headers[i];
            let header_level = parseInt(header.tagName[1]);

            if (header_level > current_level) {
                let new_list = document.createElement("ol");
                current_list.appendChild(new_list);
                current_list = new_list;
                current_level = header_level;
            } else if (header_level < current_level) {
                for (let j = 0; j < current_level - header_level; j++) {
                    current_list = current_list.parentElement;
                }
                current_level = header_level;
            }

            let new_item = document.createElement("li");
            let new_link = document.createElement("a");

            new_link.innerText = header.innerText;
            if (header.id == "")
                header.id = i.toString();
            new_link.href = "#" + header.id;

            new_item.appendChild(new_link);
            current_list.appendChild(new_item);
        }
    }

</script>