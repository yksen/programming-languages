<style>
    td {
        width: 40px;
        height: 40px;
        border: solid grey 1px;
    }
</style>

<button onclick="generateBoard(9)">Generate</button>
<button onclick="solve()">Solve</button>
<button onclick="play()">Play</button>

<table></table>

<script>
    const board = document.querySelector("table");
    const board_size = 9;
    initializeBoard();

    function initializeBoard() {
        for (let i = 0; i < board_size; i++) {
            let tr = document.createElement("tr");
            for (let j = 0; j < board_size; j++) {
                let td = document.createElement("td");
                tr.appendChild(td);
            }
            board.appendChild(tr);
        }
    }

    function generateBoard(n) {
        let indices = [...Array(board_size ** 2).keys()];
        for (let i = 0; i < n; i++) {
            let random_index = indices.splice(Math.floor(Math.random() * indices.length), 1)[0];
            let possible_numbers = [...Array(9).keys()].map(x => x + 1);
            for (let j = 0; j < board_size; j++) {
                let cell = board.rows[Math.floor(random_index / board_size)].cells[j];
                if (cell.innerHTML != "") {
                    possible_numbers.splice(possible_numbers.indexOf(parseInt(cell.innerHTML)), 1);
                }

                cell = board.rows[j].cells[random_index % board_size];
                if (cell.innerHTML != "") {
                    possible_numbers.splice(possible_numbers.indexOf(parseInt(cell.innerHTML)), 1);
                }
            }

            let square_row = Math.floor(random_index / board_size) - Math.floor(random_index / board_size) % 3;
            let square_column = random_index % board_size - random_index % board_size % 3;
            for (let j = square_row; j < square_row + 3; j++) {
                for (let k = square_column; k < square_column + 3; k++) {
                    let cell = board.rows[j].cells[k];
                    if (cell.innerHTML != "") {
                        possible_numbers.splice(possible_numbers.indexOf(parseInt(cell.innerHTML)), 1);
                    }
                }
            }

            let random_cell = board.rows[Math.floor(random_index / board_size)].cells[random_index % board_size];
            random_cell.innerHTML = possible_numbers[Math.floor(Math.random() * possible_numbers.length)];
        }
    }

    function solve() {

    }

    function play() {

    }
</script>